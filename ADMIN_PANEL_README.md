# لوحة التحكم للأدمن - Admin Dashboard

## نظرة عامة

تم إنشاء لوحة تحكم شاملة للأدمن لإدارة المستخدمين والشركات في تطبيق Invare.

## المميزات الرئيسية

### 1. لوحة التحكم الرئيسية (Dashboard)

- عرض إحصائيات شاملة:
  - إجمالي المستخدمين
  - إجمالي الشركات
  - العروض النشطة
  - الإيرادات الإجمالية
- تصميم responsive يعمل على جميع الأجهزة
- دعم كامل للوضع الليلي (Dark Mode)

### 2. إدارة المستخدمين

#### المميزات:

- عرض قائمة المستخدمين في جدول منظم
- البحث في المستخدمين حسب الاسم أو البريد الإلكتروني
- إضافة مستخدم جديد
- تعديل بيانات المستخدم
- حذف المستخدم (مع تأكيد)
- عرض حالة الحساب (نشط/غير نشط/معلق)
- عرض مستوى الاشتراك

#### الحقول المتاحة:

- الاسم الأول
- الاسم الأخير
- البريد الإلكتروني
- رقم الهاتف
- حالة الحساب (active/inactive/pending)
- مستوى الاشتراك (free/premium/enterprise)
- الدولة
- الأدوار

### 3. إدارة الشركات

#### المميزات:

- عرض قائمة الشركات في جدول منظم
- البحث في الشركات حسب الاسم أو الرقم الضريبي أو الموقع
- إضافة شركة جديدة
- تعديل بيانات الشركة
- حذف الشركة (مع تأكيد)
- عرض حالة التحقق (موثق/معلق/غير موثق)
- عرض بيانات مالك الشركة

#### الحقول المتاحة:

- اسم الشركة
- الرقم الضريبي (VAT Number)
- الموقع الإلكتروني
- حالة التحقق (verified/pending/unverified)
- الدولة
- المالك

## البنية التقنية

### الصفحات (Pages)

```
src/app/admin/
├── layout.tsx              # Layout خاص بلوحة التحكم
├── page.tsx                # الصفحة الرئيسية للوحة التحكم
├── users/
│   └── page.tsx            # صفحة إدارة المستخدمين
└── companies/
    └── page.tsx            # صفحة إدارة الشركات
```

### المكونات (Components)

```
src/components/admin/
├── AdminLayout.tsx         # Layout مع القائمة الجانبية
├── UserFormDialog.tsx      # نموذج إضافة/تعديل المستخدم
├── CompanyFormDialog.tsx   # نموذج إضافة/تعديل الشركة
└── DeleteConfirmDialog.tsx # نافذة تأكيد الحذف

src/components/ui/
├── Table.tsx               # مكون الجدول
├── Dialog.tsx              # مكون النوافذ المنبثقة
├── Select.tsx              # مكون القائمة المنسدلة
└── Badge.tsx               # مكون الشارات
```

### الترجمات

تم إضافة جميع الترجمات اللازمة في:

- `src/locales/ar.json` (العربية)
- `src/locales/en.json` (الإنجليزية)

جميع النصوص تحت مفتاح `admin.*`

## كيفية الوصول

### الروابط المباشرة:

- الصفحة الرئيسية: `/admin`
- إدارة المستخدمين: `/admin/users`
- إدارة الشركات: `/admin/companies`

### القائمة الجانبية:

تحتوي على:

1. Dashboard (الرئيسية)
2. Users (المستخدمون)
3. Companies (الشركات)

### تسجيل الدخول كأدمن:

- عند تسجيل الدخول، إذا كان `isAdmin: true` في استجابة API
- سيتم توجيهك تلقائياً إلى `/admin`
- المستخدمون العاديون يتم توجيههم إلى الصفحة الرئيسية `/`

## التقنيات المستخدمة

- **Next.js 15** - إطار العمل الأساسي
- **TypeScript** - للـ Type Safety
- **Redux Toolkit** - إدارة الحالة
- **Tailwind CSS** - التصميم
- **Lucide React** - الأيقونات
- **React Hooks** - إدارة الحالة المحلية

## الأمان والحماية

⚠️ **ملاحظة هامة**: يجب إضافة حماية لصفحات الأدمن في المستقبل:

- التحقق من دور المستخدم (Admin Role)
- إعادة التوجيه للصفحة الرئيسية للمستخدمين غير المصرح لهم
- استخدام Middleware في Next.js لحماية المسارات

### مثال على الحماية المقترحة:

```typescript
// src/middleware.ts
import { NextResponse } from "next/server";
import type { NextRequest } from "next/server";

export function middleware(request: NextRequest) {
  // التحقق من صلاحيات الأدمن
  const isAdmin = checkAdminRole(request);

  if (!isAdmin) {
    return NextResponse.redirect(new URL("/", request.url));
  }

  return NextResponse.next();
}

export const config = {
  matcher: "/admin/:path*",
};
```

## التطوير المستقبلي

### المميزات المقترحة:

1. **إدارة الطلبات** - صفحة لعرض وإدارة جميع الطلبات
2. **إدارة العروض** - صفحة لإدارة العروض والمزادات
3. **التقارير والإحصائيات** - تقارير تفصيلية عن الأداء
4. **إدارة الصلاحيات** - نظام متقدم للأدوار والصلاحيات
5. **سجل الأنشطة** - تتبع جميع التغييرات والإجراءات
6. **التصدير والاستيراد** - تصدير البيانات بصيغ مختلفة
7. **الإشعارات** - نظام إشعارات للأدمن
8. **Dashboard Analytics** - رسوم بيانية ومؤشرات أداء

### التحسينات المقترحة:

1. **Pagination** - إضافة ترقيم للصفحات في الجداول
2. **Sorting** - إضافة إمكانية الفرز حسب الأعمدة
3. **Filtering** - فلاتر متقدمة للبحث
4. **Bulk Actions** - إجراءات جماعية على عدة عناصر
5. **Export Data** - تصدير البيانات إلى CSV/Excel
6. **Image Upload** - رفع الصور والملفات
7. **Rich Text Editor** - محرر نصوص متقدم للوصف
8. **Activity Log** - سجل بجميع التعديلات

## الاستخدام

### إضافة مستخدم جديد:

1. اذهب إلى `/admin/users`
2. اضغط على زر "إضافة مستخدم"
3. املأ النموذج
4. اضغط "حفظ"

### تعديل مستخدم:

1. اذهب إلى `/admin/users`
2. اضغط على أيقونة التعديل ✏️ بجانب المستخدم
3. عدل البيانات
4. اضغط "حفظ"

### حذف مستخدم:

1. اذهب إلى `/admin/users`
2. اضغط على أيقونة الحذف 🗑️ بجانب المستخدم
3. أكد الحذف

نفس الخطوات تنطبق على إدارة الشركات.

## الدعم

لأي استفسارات أو مشاكل، يرجى التواصل مع فريق التطوير.

---

تم إنشاء لوحة التحكم في: October 31, 2025
